# 進捗確認方法

## 住所取得の進捗確認

### ログファイルの確認

```bash
# リアルタイムでログを確認
tail -f update-addresses-full.log

# 最新の30行を確認
tail -30 update-addresses-full.log
```

### 取得状況の確認

```bash
# 詳細な住所が取得できた件数（「駅」を含まない住所）
cat scripts/tokyo-calendar-restaurants.json | jq '[.[] | select(.address and (.address | length > 0) and (.address | contains("駅") | not))] | length'

# まだ「駅」のみの住所の件数
cat scripts/tokyo-calendar-restaurants.json | jq '[.[] | select(.address and (.address | contains("駅")))] | length'
```

### 処理の停止

```bash
# プロセスを確認
ps aux | grep "update-addresses"

# プロセスを停止（必要に応じて）
pkill -f "update-addresses"
```

## 実行時間の目安

- **全件（約2,600件）**: 約1-2時間
  - 1件あたり約2-3秒（詳細ページへのアクセス + 待機時間）

## 完了後の確認

処理が完了したら、以下で確認：

```bash
# 詳細な住所が取得できた件数
cat scripts/tokyo-calendar-restaurants.json | jq '[.[] | select(.address and (.address | length > 0) and (.address | contains("駅") | not))] | length'

# サンプルを確認
cat scripts/tokyo-calendar-restaurants.json | jq '.[0:5] | .[] | {name, address, latitude, longitude}'
```

## 次のステップ

住所取得が完了したら：

1. **Google Maps Geocoding APIで緯度・経度を取得**
   ```bash
   npm run geocode:addresses:test  # テスト
   npm run geocode:addresses       # 全件
   ```

2. **データベースに投入**
   ```bash
   npm run db:import:tokyo-calendar
   ```
