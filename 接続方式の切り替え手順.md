# 接続方式の切り替え手順

## 現在の状況

Supabaseの接続設定で「Not IPv4 compatible」と表示されており、IPv4ネットワークからの接続ができない可能性があります。

## 対処法

### 方法1: Session Poolerを使用する（推奨）

1. Supabaseダッシュボードで、「Connection string」セクションを開く
2. 「Method」の選択肢で、**「Session Pooler」** を選択
3. 表示される接続URLをコピー

Session Poolerの接続URLは、以下のような形式になります：

```
postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true
```

ポート番号が `6543` になり、`pgbouncer=true` パラメータが追加されます。

### 方法2: Direct connectionのURLをそのまま使用する

現在表示されている接続URL:
```
postgresql://postgres:[YOUR-PASSWORD]@db.alnqctmakkhlzwezfibj.supabase.co:5432/postgres
```

このURLを、パスワードを置き換えて使用します。

---

## 試してみる手順

まず、**Session Pooler**の接続URLを取得して、それを試してみましょう。

1. 「Connection string」セクションで、「Method」を **「Session Pooler」** に変更
2. 表示される接続URL全体をコピー
3. そのURLを `.env` ファイルの `DATABASE_URL` に設定

---

**「Session Pooler」を選択して、表示される接続URL全体を教えてください！**



